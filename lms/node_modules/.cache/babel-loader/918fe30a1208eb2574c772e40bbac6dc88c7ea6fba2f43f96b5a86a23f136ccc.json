{"ast":null,"code":"import _slicedToArray from\"F:/Users/Asus/react_lms/lms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState}from'react';import Avatar from'@mui/material/Avatar';import Button from'@mui/material/Button';import CssBaseline from'@mui/material/CssBaseline';import TextField from'@mui/material/TextField';import Alert from'@mui/material/Alert';// import Link from '@mui/material/Link';\nimport Grid from'@mui/material/Grid';import Box from'@mui/material/Box';import Typography from'@mui/material/Typography';import Container from'@mui/material/Container';import{createTheme,ThemeProvider}from'@mui/material/styles';import api from'../../api';import{useNavigate,useLocation}from'react-router-dom';import VerifiedUserOutlinedIcon from'@mui/icons-material/VerifiedUserOutlined';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function VerifyUser(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),alert=_useState2[0],setAlert=_useState2[1];var location=useLocation();var navigate=useNavigate();var theme=createTheme();var messages={400:['error',\"Required * fields can't be empty\"],401:['error',\"OTP is invalid\"],200:['success',\"Verification Successful!!, Please login...\"],201:['info',\"OTP sent successfully!!\"],404:['error',\"User doesn't exist!!\"],500:['error',\"Internal Server error!\"]};var closeAlert=function closeAlert(){setAlert(0);};function handleSubmit(event){event.preventDefault();var data=new FormData(event.currentTarget);var otpData=data.get(\"otp\");console.log(otpData);console.log(location.state.userId);api.post(\"/verifyUser\",{userId:location.state.userId,otp:otpData}).then(function(res){setAlert(res.status);setTimeout(function(){console.log(res);navigate(\"/login\");},3000);}).catch(function(err){console.log(err);setAlert(err.response.status);});}function onResendOtp(){api.post(\"/resendOtp\",{userId:location.state.userId}).then(function(res){setAlert(res.status);setTimeout(function(){closeAlert();},3000);}).catch(function(err){setAlert(err.response.status);setTimeout(function(){closeAlert();},3000);});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(Box,{sx:{marginTop:8,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Box,{children:alert?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Alert,{severity:messages[alert][0],variant:\"filled\",onClose:closeAlert,children:[\" \",messages[alert][1],\" \"]}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsx(_Fragment,{})}),/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'secondary.main'},children:/*#__PURE__*/_jsx(VerifiedUserOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Enter OTP\"}),/*#__PURE__*/_jsxs(Typography,{component:\"h6\",children:[\"OTP for verification sent on email: \",location.state.email,\", please check!!\"]}),/*#__PURE__*/_jsxs(Box,{component:\"form\",onSubmit:handleSubmit,noValidate:true,sx:{mt:1},children:[/*#__PURE__*/_jsx(TextField,{margin:\"normal\",required:true,fullWidth:true,name:\"otp\",label:\"One Time Password\",type:\"password\",id:\"otp\",autoComplete:\"current-password\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},children:\"Submit\"}),/*#__PURE__*/_jsx(Grid,{container:true,children:/*#__PURE__*/_jsxs(Grid,{item:true,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Didn't received OTP?\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"medium\",onClick:onResendOtp,children:\"Resend OTP\"})]})})]})]})]})})});}","map":{"version":3,"names":["React","useState","Avatar","Button","CssBaseline","TextField","Alert","Grid","Box","Typography","Container","createTheme","ThemeProvider","api","useNavigate","useLocation","VerifiedUserOutlinedIcon","VerifyUser","alert","setAlert","location","navigate","theme","messages","closeAlert","handleSubmit","event","preventDefault","data","FormData","currentTarget","otpData","get","console","log","state","userId","post","otp","then","res","status","setTimeout","catch","err","response","onResendOtp","marginTop","display","flexDirection","alignItems","m","bgcolor","email","mt","mb"],"sources":["F:/Users/Asus/react_lms/lms/src/pages/verifyUser/index.js"],"sourcesContent":["import { React, useState } from 'react'\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Button from '@mui/material/Button';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport TextField from '@mui/material/TextField';\r\nimport Alert from '@mui/material/Alert'\r\n// import Link from '@mui/material/Link';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport api from '../../api';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport VerifiedUserOutlinedIcon from '@mui/icons-material/VerifiedUserOutlined';\r\n\r\nexport default function VerifyUser() {\r\n\r\n  const [alert, setAlert] = useState(0);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const theme = createTheme();\r\n\r\n  const messages = {\r\n    400: ['error', \"Required * fields can't be empty\"],\r\n    401: ['error', \"OTP is invalid\"],\r\n    200: ['success', \"Verification Successful!!, Please login...\"],\r\n    201: ['info', \"OTP sent successfully!!\"],\r\n    404: ['error', \"User doesn't exist!!\"],\r\n    500: ['error', \"Internal Server error!\"]\r\n  }\r\n\r\n  const closeAlert = () => {\r\n    setAlert(0);\r\n  }\r\n\r\n  function handleSubmit(event){\r\n\r\n    event.preventDefault();\r\n    const data = new FormData(event.currentTarget);\r\n\r\n    const otpData = data.get(\"otp\");\r\n    console.log(otpData);\r\n    console.log(location.state.userId)\r\n    \r\n    api.post(\"/verifyUser\", {\r\n      userId: location.state.userId,\r\n      otp: otpData,\r\n    })\r\n    .then(function(res){\r\n      setAlert(res.status)\r\n      setTimeout(function(){\r\n        console.log(res);\r\n        navigate(\"/login\");\r\n      }, 3000)\r\n    })\r\n    .catch(function(err){\r\n      console.log(err);\r\n      setAlert(err.response.status);\r\n    })\r\n  }\r\n\r\n\r\n  function onResendOtp(){\r\n    api.post(\"/resendOtp\", {\r\n      userId: location.state.userId,\r\n    })\r\n    .then(function(res){\r\n        setAlert(res.status);\r\n        setTimeout(()=>{\r\n          closeAlert();\r\n        }, 3000);\r\n    })\r\n    .catch(function(err){\r\n      setAlert(err.response.status);\r\n      setTimeout(()=>{\r\n        closeAlert();\r\n      }, 3000);\r\n    })\r\n  }\r\n  \r\n  return (\r\n    <>\r\n      <ThemeProvider theme={theme}>\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n          <CssBaseline />\r\n          <Box\r\n            sx={{\r\n              marginTop: 8,\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              alignItems: 'center',\r\n            }}\r\n          >\r\n            <Box>\r\n              {\r\n              (alert)\r\n              ? \r\n              <><Alert severity={messages[alert][0]} variant='filled' onClose={closeAlert}> {messages[alert][1]} </Alert>\r\n                <br></br>\r\n              </>\r\n              :\r\n              <></>}\r\n            </Box>\r\n            <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n              <VerifiedUserOutlinedIcon />\r\n            </Avatar>\r\n            <Typography component=\"h1\" variant=\"h5\">\r\n              Enter OTP\r\n            </Typography>\r\n            <Typography component=\"h6\" >\r\n              OTP for verification sent on email: {location.state.email}, please check!!\r\n            </Typography>\r\n            \r\n            <Box component=\"form\" onSubmit={handleSubmit} noValidate sx={{ mt: 1 }}>\r\n              <TextField\r\n                margin=\"normal\"\r\n                required\r\n                fullWidth\r\n                name=\"otp\"\r\n                label=\"One Time Password\"\r\n                type=\"password\"\r\n                id=\"otp\"\r\n                autoComplete=\"current-password\"\r\n                />\r\n              <Button\r\n                type=\"submit\"\r\n                fullWidth\r\n                variant=\"contained\"\r\n                sx={{ mt: 3, mb: 2 }}\r\n                >\r\n                Submit\r\n              </Button>\r\n              <Grid container>\r\n                <Grid item>\r\n                  <p>Didn't received OTP?</p>\r\n                  <Button variant='outlined' size='medium' onClick={onResendOtp}>Resend OTP</Button>\r\n                </Grid>\r\n              </Grid>\r\n            </Box>\r\n          </Box>\r\n        </Container>\r\n      </ThemeProvider>\r\n    </>\r\n  )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}