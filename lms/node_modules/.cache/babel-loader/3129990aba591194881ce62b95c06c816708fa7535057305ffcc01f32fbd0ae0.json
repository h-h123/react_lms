{"ast":null,"code":"import _slicedToArray from\"F:/Users/Asus/react_lms/lms/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from'react-router-dom';import Avatar from'@mui/material/Avatar';import Button from'@mui/material/Button';import CssBaseline from'@mui/material/CssBaseline';import TextField from'@mui/material/TextField';import Link from'@mui/material/Link';import Grid from'@mui/material/Grid';import Box from'@mui/material/Box';import Alert from'@mui/material/Alert';import LockOutlinedIcon from'@mui/icons-material/LockOutlined';import Typography from'@mui/material/Typography';import Container from'@mui/material/Container';import{createTheme,ThemeProvider}from'@mui/material/styles';import api from'../../api';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),alert=_useState2[0],setAlert=_useState2[1];var navigate=useNavigate();var theme=createTheme();var messages={400:['error',\"Required * fields can't be empty\"],200:['success',\"Log In successful, redirecting to home...\"],201:['info',\"Email not verified, redirecting to verify\"],401:['error',\"Email or Password is incorrect.\"],500:['error',\"Internal Server error!\"]};var onAlertClosed=function onAlertClosed(){setAlert(0);};function handleSubmit(event){event.preventDefault();var data=new FormData(event.currentTarget);if(!data.get('email')||!data.get('password')){setAlert(400);setTimeout(function(){onAlertClosed();},3000);return;}var loginDataObj={email:data.get('email'),password:data.get('password')};api.post('/login',loginDataObj,{withCredentials:true}).then(function(res){setAlert(res.status);if(res.status===200){setTimeout(function(){onAlertClosed();navigate(\"/\");},3000);}else if(res.status===201){setTimeout(function(){onAlertClosed();navigate(\"/verifyUser\",{state:{userId:res.data.userId,email:res.data.email}});},3000);}}).catch(function(err){setAlert(err.response.status);setTimeout(function(){onAlertClosed();},3000);});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsxs(Container,{component:\"main\",maxWidth:\"xs\",children:[/*#__PURE__*/_jsx(CssBaseline,{}),/*#__PURE__*/_jsxs(Box,{sx:{marginTop:3,display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{m:1,bgcolor:'secondary.main'},children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(Typography,{component:\"h1\",variant:\"h5\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Box,{children:alert?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Alert,{severity:messages[alert][0],variant:\"filled\",onClose:onAlertClosed,children:[\" \",messages[alert][1],\" \"]}),/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsx(_Fragment,{})}),/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,onSubmit:handleSubmit,sx:{mt:3},children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"email\",label:\"Email Address\",name:\"email\",autoComplete:\"email\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,name:\"password\",label:\"Password\",type:\"password\",id:\"password\",autoComplete:\"new-password\"})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",sx:{mt:3,mb:2},children:\"Log In\"}),/*#__PURE__*/_jsx(Grid,{container:true,justifyContent:\"flex-end\",children:/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Link,{href:\"/register\",variant:\"body2\",children:\"Not registered yet? Sign up\"})})})]})]})]})})});}","map":{"version":3,"names":["React","useState","useNavigate","Avatar","Button","CssBaseline","TextField","Link","Grid","Box","Alert","LockOutlinedIcon","Typography","Container","createTheme","ThemeProvider","api","Login","alert","setAlert","navigate","theme","messages","onAlertClosed","handleSubmit","event","preventDefault","data","FormData","currentTarget","get","setTimeout","loginDataObj","email","password","post","withCredentials","then","res","status","state","userId","catch","err","response","marginTop","display","flexDirection","alignItems","m","bgcolor","mt","mb"],"sources":["F:/Users/Asus/react_lms/lms/src/pages/login/index.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nimport Avatar from '@mui/material/Avatar';\r\nimport Button from '@mui/material/Button';\r\nimport CssBaseline from '@mui/material/CssBaseline';\r\nimport TextField from '@mui/material/TextField';\r\nimport Link from '@mui/material/Link';\r\nimport Grid from '@mui/material/Grid';\r\nimport Box from '@mui/material/Box';\r\nimport Alert from '@mui/material/Alert';\r\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\r\nimport Typography from '@mui/material/Typography';\r\nimport Container from '@mui/material/Container';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\n\r\nimport api from '../../api'\r\n\r\n\r\nexport default function Login() {\r\n\r\n\r\n  const [alert, setAlert] = useState(0);\r\n  const navigate = useNavigate();\r\n  const theme = createTheme();\r\n\r\n  const messages = {\r\n    400: ['error', \"Required * fields can't be empty\"],\r\n    200: ['success', \"Log In successful, redirecting to home...\"],\r\n    201: ['info', \"Email not verified, redirecting to verify\"],\r\n    401: ['error', \"Email or Password is incorrect.\"],\r\n    500: ['error', \"Internal Server error!\"]\r\n  }\r\n\r\n  const onAlertClosed = () => {\r\n    setAlert(0);\r\n  }\r\n\r\n  function handleSubmit(event){\r\n\r\n    event.preventDefault();\r\n    const data = new FormData(event.currentTarget);\r\n\r\n    if(!data.get('email') || !data.get('password')){\r\n      setAlert(400);\r\n      setTimeout(() => {\r\n        onAlertClosed();\r\n      }, 3000);\r\n      return\r\n    }\r\n\r\n    const loginDataObj = {\r\n      email: data.get('email'),\r\n      password: data.get('password')\r\n    } \r\n    \r\n    api.post('/login', loginDataObj, {withCredentials: true})\r\n    .then(function(res){\r\n      setAlert(res.status);\r\n      if(res.status === 200){\r\n        setTimeout(function(){\r\n          onAlertClosed();\r\n          navigate(\"/\")\r\n        }, 3000);\r\n      }\r\n      else if(res.status === 201){\r\n        setTimeout(function(){\r\n          onAlertClosed();\r\n          navigate(\"/verifyUser\", {state: { userId: res.data.userId, email: res.data.email}})\r\n        }, 3000);\r\n      }\r\n    })\r\n    .catch(function(err){\r\n      setAlert(err.response.status);\r\n      setTimeout(function(){\r\n        onAlertClosed();\r\n      }, 3000);\r\n    }); \r\n  }\r\n\r\n  return (\r\n    <>\r\n    <ThemeProvider theme={theme}>\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <CssBaseline />\r\n        <Box\r\n          sx={{\r\n            marginTop: 3,\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            alignItems: 'center',\r\n          }}\r\n          >\r\n          <Avatar sx={{ m: 1, bgcolor: 'secondary.main' }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Log In\r\n          </Typography>\r\n          <br></br>\r\n          <Box>\r\n            {(alert)? <><Alert severity={messages[alert][0]} variant='filled' onClose={onAlertClosed}> {messages[alert][1]} </Alert>\r\n          <br></br></>:<></>}\r\n          </Box>\r\n          <Box component=\"form\" noValidate onSubmit={handleSubmit} sx={{ mt: 3 }}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  required\r\n                  fullWidth\r\n                  id=\"email\"\r\n                  label=\"Email Address\"\r\n                  name=\"email\"\r\n                  autoComplete=\"email\"\r\n                  />\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <TextField\r\n                  required\r\n                  fullWidth\r\n                  name=\"password\"\r\n                  label=\"Password\"\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  autoComplete=\"new-password\"\r\n                  />\r\n              </Grid>\r\n            </Grid>\r\n            <Button\r\n              type=\"submit\"\r\n              fullWidth\r\n              variant=\"contained\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n              >\r\n              Log In\r\n            </Button>\r\n            <Grid container justifyContent=\"flex-end\">\r\n              <Grid item>\r\n                <Link href=\"/register\" variant=\"body2\">\r\n                  Not registered yet? Sign up\r\n                </Link>\r\n              </Grid>\r\n            </Grid>\r\n          </Box>\r\n        </Box>\r\n      </Container>\r\n    </ThemeProvider>\r\n    </>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}